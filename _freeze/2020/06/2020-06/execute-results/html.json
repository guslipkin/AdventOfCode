{
  "hash": "8b7e3d1ff8a3c3eb819ff0879bfffaeb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"2020-06: Custom Customs\"\nformat: html\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(sets)\ndt <- read_xls(\"input.xls\")\n```\n:::\n\n\n\n\n## Part 1\n\nRecycling this from D4P2\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- dt\ntestDF <- df[1,]\ndfRow <- 1\ndfColumn <- 1\nfor(r in 1:2001) {\n  if(!is.na(df[r,1])) {\n    testDF[dfRow, dfColumn] <- df[r,1]\n    dfColumn <- dfColumn + 1\n  }\n  else {\n    dfRow <- dfRow + 1\n    dfColumn <- 1\n  }\n}\ndf <- testDF\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 456 × 5\n   X1                X1                 X1                 X1              X1   \n   <chr>             <chr>              <chr>              <chr>           <chr>\n 1 tr                rt                 tr                 rt              tr   \n 2 fdrhu             gwuksvro           <NA>               <NA>            <NA> \n 3 tesnouwyrdf       twofuspcmvenh      <NA>               <NA>            <NA> \n 4 cnxpsmuqiaw       cxovminqpawus      qwaxjmupnsic       <NA>            <NA> \n 5 anpskchzojyeguwr  soqauprxzgmycvef   sorplgezycau       ngrecposyizwau  ayep…\n 6 mvwcl             vlcwxm             uwcflhpkjor        blnvwtic        wcmzl\n 7 hyvowmqzixc       lacsrjdyxiz        fyczpbxlti         <NA>            <NA> \n 8 qxjhrgefbkm       eqrgbfhjxkcm       <NA>               <NA>            <NA> \n 9 catsrkyjulmfzvixe teyxvimulfkczqrjsa xrtlyaqemsucjzkifv drjlmncsiftxae… <NA> \n10 ocgrnldhja        jicwgntvuhk        cxgajhln           <NA>            <NA> \n# ℹ 446 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf[is.na(df)] <- \"\"\ndf$all <- \"\"\nfor(r in 1:456) {\n  df$all[r] <- paste(df[r,1], df[r,2], df[r,3], df[r,4], df[r,5], sep = \"\")\n  df$count[r] <- length(unique(unlist(strsplit(df$all[r], \"\"))))\n}\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Unknown or uninitialised column: `count`.\n```\n\n\n:::\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 456 × 7\n   X1                X1                 X1               X1    X1    all   count\n   <chr>             <chr>              <chr>            <chr> <chr> <chr> <int>\n 1 tr                rt                 \"tr\"             \"rt\"  \"tr\"  trrt…     2\n 2 fdrhu             gwuksvro           \"\"               \"\"    \"\"    fdrh…    11\n 3 tesnouwyrdf       twofuspcmvenh      \"\"               \"\"    \"\"    tesn…    16\n 4 cnxpsmuqiaw       cxovminqpawus      \"qwaxjmupnsic\"   \"\"    \"\"    cnxp…    14\n 5 anpskchzojyeguwr  soqauprxzgmycvef   \"sorplgezycau\"   \"ngr… \"aye… anps…    24\n 6 mvwcl             vlcwxm             \"uwcflhpkjor\"    \"bln… \"wcm… mvwc…    19\n 7 hyvowmqzixc       lacsrjdyxiz        \"fyczpbxlti\"     \"\"    \"\"    hyvo…    21\n 8 qxjhrgefbkm       eqrgbfhjxkcm       \"\"               \"\"    \"\"    qxjh…    12\n 9 catsrkyjulmfzvixe teyxvimulfkczqrjsa \"xrtlyaqemsucjz… \"drj… \"\"    cats…    21\n10 ocgrnldhja        jicwgntvuhk        \"cxgajhln\"       \"\"    \"\"    ocgr…    17\n# ℹ 446 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(df$count)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 6310\n```\n\n\n:::\n:::\n\n\n\n\n## Part 2\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- dt\ntestDF <- df[1,]\ndfRow <- 1\ndfColumn <- 1\nfor(r in 1:2001) {\n  if(!is.na(df[r,1])) {\n    testDF[dfRow, dfColumn] <- df[r,1]\n    dfColumn <- dfColumn + 1\n  }\n  else {\n    dfRow <- dfRow + 1\n    dfColumn <- 1\n  }\n}\ndf <- testDF\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 456 × 5\n   X1                X1                 X1                 X1              X1   \n   <chr>             <chr>              <chr>              <chr>           <chr>\n 1 tr                rt                 tr                 rt              tr   \n 2 fdrhu             gwuksvro           <NA>               <NA>            <NA> \n 3 tesnouwyrdf       twofuspcmvenh      <NA>               <NA>            <NA> \n 4 cnxpsmuqiaw       cxovminqpawus      qwaxjmupnsic       <NA>            <NA> \n 5 anpskchzojyeguwr  soqauprxzgmycvef   sorplgezycau       ngrecposyizwau  ayep…\n 6 mvwcl             vlcwxm             uwcflhpkjor        blnvwtic        wcmzl\n 7 hyvowmqzixc       lacsrjdyxiz        fyczpbxlti         <NA>            <NA> \n 8 qxjhrgefbkm       eqrgbfhjxkcm       <NA>               <NA>            <NA> \n 9 catsrkyjulmfzvixe teyxvimulfkczqrjsa xrtlyaqemsucjzkifv drjlmncsiftxae… <NA> \n10 ocgrnldhja        jicwgntvuhk        cxgajhln           <NA>            <NA> \n# ℹ 446 more rows\n```\n\n\n:::\n:::\n\n\n\n\nCredit to [Matthew McMillan](https://github.com/UnsolvedCypher) for the idea of using sets\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfor(r in 1:456)\n  for(c in 2:5)\n    if(is.na(df[r,c]))\n      df[r,c] <- df[r,1]\ndf$matthew <- NA_integer_\nfor(r in 1:456) {\n  df$matthew[r] <-\n    length(unique(\n      set_intersection(\n        unique(unlist(strsplit(\n          as.character(df[r, 1]), \"\"\n        ))),\n        unique(unlist(strsplit(\n          as.character(df[r, 2]), \"\"\n        ))),\n        unique(unlist(strsplit(\n          as.character(df[r, 3]), \"\"\n        ))),\n        unique(unlist(strsplit(\n          as.character(df[r, 4]), \"\"\n        ))),\n        unique(unlist(strsplit(\n          as.character(df[r, 5]), \"\"\n        )))\n      )\n    ))\n}\n\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 456 × 6\n   X1                X1                 X1                 X1      X1    matthew\n   <chr>             <chr>              <chr>              <chr>   <chr>   <int>\n 1 tr                rt                 tr                 rt      tr          2\n 2 fdrhu             gwuksvro           fdrhu              fdrhu   fdrhu       2\n 3 tesnouwyrdf       twofuspcmvenh      tesnouwyrdf        tesnou… tesn…       8\n 4 cnxpsmuqiaw       cxovminqpawus      qwaxjmupnsic       cnxpsm… cnxp…      11\n 5 anpskchzojyeguwr  soqauprxzgmycvef   sorplgezycau       ngrecp… ayep…      11\n 6 mvwcl             vlcwxm             uwcflhpkjor        blnvwt… wcmzl       3\n 7 hyvowmqzixc       lacsrjdyxiz        fyczpbxlti         hyvowm… hyvo…       5\n 8 qxjhrgefbkm       eqrgbfhjxkcm       qxjhrgefbkm        qxjhrg… qxjh…      11\n 9 catsrkyjulmfzvixe teyxvimulfkczqrjsa xrtlyaqemsucjzkifv drjlmn… cats…      17\n10 ocgrnldhja        jicwgntvuhk        cxgajhln           ocgrnl… ocgr…       5\n# ℹ 446 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(df$matthew)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3193\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}