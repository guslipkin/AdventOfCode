{
  "hash": "ad6b74dc067a87ea357dfd7a384d134f",
  "result": {
    "markdown": "---\ntitle: \"2020-07: Handy Haversacks\"\nformat: html\n---\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-1_01f96be6784bc7c85e99b21cd8d89679'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ndf <- read.csv(\"input.csv\")\n\ndf$child2C[as.character(df$child2C) == \" \"] <- NA\ndf$child3C[as.character(df$child3C) == \" \"] <- NA\ndf$child4C[as.character(df$child4C) == \" \"] <- NA\n```\n:::\n\n\n## Part 1\n\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-2_ee63dd4e9f165415f0661b8443251572'}\n\n```{.r .cell-code}\nlongerDF <- data.frame(parent = \"\", nChild = 0, cChild = \"\")\n\nfor(col in seq(3, 9, by = 2)) {\n  for(r in 1:nrow(df)) {\n    if(!is.na(df[r,col-1]))\n      for(i in 1:df[r,col-1]) {\n        longerDF <- rbind(longerDF, data.frame(parent = df[r,1], \n                                               nChild = df[r,col-1], \n                                               cChild = df[r,col]))\n    }\n  }\n}\nlongerDF <- longerDF[-1,]\n```\n:::\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-3_a0c452ef1385c8e0ee584e0ece0f1ad8'}\n\n```{.r .cell-code}\nshinygoldDF <- \n  longerDF[longerDF$cChild == \"shiny gold\" | longerDF$parent == \"shiny gold\",]\n```\n:::\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-4_53afc43baf2343498501f52d203dc4ae'}\n\n```{.r .cell-code}\nlevel <- c(\"shiny gold\")\noldRows <- 0\n\nwhile(oldRows != nrow(shinygoldDF)) {\n  oldRows <- nrow(shinygoldDF)\n  level <- unlist(shinygoldDF$parent)\n  shinygoldDF <-\n    df[as.character(df$parent) %in% level |\n         as.character(df$child1C) %in% level |\n         as.character(df$child2C) %in% level |\n         as.character(df$child3C) %in% level |\n         as.character(df$child4C) %in% level, ]\n}\nnrow(shinygoldDF) - 1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 164\n```\n:::\n:::\n\n\n## Part 2\n\n::: {.callout-caution}\n\nThis solution is still under construction.\n\n:::\n\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-5_d047907d02d5271846eb5e404011a531'}\n\n```{.r .cell-code}\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'data.table'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:purrr':\n\n    transpose\n```\n:::\n\n```{.r .cell-code}\nlibrary(stringr)\n```\n:::\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-6_83d178dd3171e184e862eb023bea77f8'}\n\n```{.r .cell-code}\ndf <- readLines(\"input3.txt\")\ndt <- data.table(\"parent\" = \"\", \"child\" = \"\")\n# str_split(df, \" bags contain | bags, | bags\\\\.\")\nstr_extract_all(df, \"(no other|\\\\d) (\\\\w* \\\\w*)|(\\\\w* \\\\w*) bags\") |>\n  lapply(function(x) {\n    c(\n      str_replace_all(x[1], \" bags\", \"\"),\n      sapply(x[-1], function(y) {\n        str_extract_all(y, \"(\\\\d|no other)| (\\\\w* \\\\w*)\")\n      }) |> unlist() |> unname()\n    )\n  }) |>\n  lapply(function(x) {\n    str_remove_all(x, \" \")\n  }) |>\n  lapply(function(x) {\n    len <- (length(x) - 1) / 2\n    counts <- x[2*(1:len)]\n    counts <- as.numeric(ifelse(counts == \"no other\", NA, counts))\n    children <- x[2*(1:len) + 1]\n    children <- sapply(1:length(counts), function(y) {\n      if(!is.na(counts[y])) {\n       t(t(rep(children[y], times = counts[y])))\n      } else { return(NA) }\n    }) |> unlist()\n    sumCount <- ifelse(is.na(counts), 0, counts)\n    parent <- rep(x[1], sum(sumCount))\n    cbind(parent, children)\n  })\n```\n:::\n\n::: {.cell hash='2020-07_cache/html/unnamed-chunk-7_08debcc179c0043481d281545f3159ba'}\n\n```{.r .cell-code}\nrep(\"c\", 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"c\" \"c\" \"c\" \"c\" \"c\"\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}