{
  "hash": "c93c0fb0aec956b5c369241d243e875b",
  "result": {
    "markdown": "---\ntitle: \"2022-05: Supply Stacks\"\nformat: html\n---\n\n::: {.cell hash='2022-05_cache/html/unnamed-chunk-1_6570c55fbe16f5d0c95a61acba1a2c15'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   0.3.5 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.4.1 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'data.table'\n\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n\nThe following object is masked from 'package:purrr':\n\n    transpose\n```\n:::\n:::\n\n\nThis was a big mess. It took me forever to read in the input and I eventually stumbled upon `reaf_fwf` because I couldn't remember what a fixed-width file was. I kept looking for delimited readers and tried all sorts of crazy things.\n\n::: {.callout-note}\n\nThe `do_part` function was added after completion so that the code isn't too long when sharing since it's such a minor difference.\n\n:::\n\n\n::: {.cell hash='2022-05_cache/html/unnamed-chunk-2_0c0a5cfc4befc7ca053a882717f0b617'}\n\n```{.r .cell-code}\nfile_name <- \"input.txt\"\nmove <- function(piles, i, ins, part) {\n  moveN <- ins$X2[i]\n  fromN <- ins$X3[i]\n  toN <- ins$X4[i]\n  \n  from <- piles[[fromN]]\n  to <- piles[[toN]]\n  \n  if (part == 1) { to <- c(rev(from[1:moveN]), to) }\n  else if (part == 2) { to <- c(from[1:moveN], to) }\n  from <- tail(from, -moveN)\n  \n  piles[[fromN]] <- from[!is.na(from)]\n  piles[[toN]] <- to[!is.na(to)]\n  \n  return(piles)\n}\n\ndo_part <- function(part) {\n  dt <- readLines(file_name)\n  piles <- read_fwf(file = file_name, na = \"  \", n_max = which(dt == \"\") - 2)\n  \n  piles <- piles |>\n    as.matrix()\n  piles <-\n    lapply(seq_len(ncol(piles)), \\(i) piles[, i]) |>\n    lapply(\\(x) str_extract(x[x != \"\"], \"\\\\w\"))\n  \n  ins <-\n    readLines(file_name) |>\n    tail(-(which(dt == \"\") - 1)) |>\n    str_match_all(\"move (\\\\d*) from (\\\\d*) to (\\\\d*)\") %>%\n    do.call(rbind, .) |>\n    data.frame() |>\n    lapply(as.numeric) |>\n    data.frame()\n  \n  for (i in 1:nrow(ins)) {\n    piles <- move(piles, i, ins, part = part)\n  }\n  piles |>\n    lapply(\\(x) head(x, 1)) |>\n    unlist() |>\n    paste(collapse = \"\")\n}\n```\n:::\n\n\n## Part 1\n\nOnce I had the input in, it was relatively smooth sailing. I missed the part in part 1 where the boxes move one by one (oh part 2, how I wish I knew you then...) but once I had that fixed, I was looking pretty good. I got the test input working but then the real input wasn't working. I eventually realized that my regex `\\\\d` was missing any numbers greater than 9 once that was fixed, everything else was pretty easy.\n\n\n::: {.cell hash='2022-05_cache/html/unnamed-chunk-3_b5a84c64fd6db6077e03522bb53c64a9'}\n\n```{.r .cell-code}\ndo_part(1)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 8 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\n\nchr (9): X1, X2, X3, X4, X5, X6, X7, X8, X9\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in lapply(data.frame(str_match_all(tail(readLines(file_name), -(which(dt\n== : NAs introduced by coercion\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"ZBDRNPMVH\"\n```\n:::\n:::\n\n\n## Part 2\n\nAfter firing off a celebratory text message, I read part 2, deleted my `rev` and was done in 52 seconds!\n\n\n::: {.cell hash='2022-05_cache/html/unnamed-chunk-4_0c28b0d83076e2b512e26d720247bb42'}\n\n```{.r .cell-code}\ndo_part(2)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 8 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\n\nchr (9): X1, X2, X3, X4, X5, X6, X7, X8, X9\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in lapply(data.frame(str_match_all(tail(readLines(file_name), -(which(dt\n== : NAs introduced by coercion\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"WDLPFNNNB\"\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}