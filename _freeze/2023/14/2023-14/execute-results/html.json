{
  "hash": "4e1208e93dfafa2deb2952e515fbced5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"14: \"\nformat: html\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mistlecode)\n\noptions(scipen = 999)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndt <-\n  readLines('input2.txt') |>\n  stringr::str_split('') |>\n  purrr::map(\\(x) {\n    x |>\n      t() |>\n      tibble::as_tibble()\n  }) |>\n  purrr::list_rbind() |>\n  as.list() |>\n  purrr::map(\\(x) c(x, '#'))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The `x` argument of `as_tibble.matrix()` must have unique column names if\n`.name_repair` is omitted as of tibble 2.0.0.\nℹ Using compatibility `.name_repair`.\n```\n\n\n:::\n:::\n\n\n\n\n## Part 1\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshift <- function(x) {\n  x |>\n    rev() |>\n    tibble::as_tibble() |>\n    dplyr::mutate(\n      square = cumsum(value == '#'),\n      row_zero = dplyr::row_number() == 1\n    ) |>\n    dplyr::mutate(\n      rounds = cumsum(value == 'O'),\n      shifted = dplyr::case_when(\n        value == '#' ~ '#',\n        # row_zero & dplyr::row_number() <= max(rounds) + 1 ~ 'O',\n        dplyr::row_number() != 1 & dplyr::row_number() <= max(rounds) + 1 ~ 'O', \n        TRUE ~ '.'\n      ),\n      .by = 'square'\n    ) |>\n    tail(-1) |>\n    dplyr::mutate(load = ifelse(shifted == 'O', dplyr::row_number(), 0)) |>\n    print() |>\n    dplyr::pull(load) |>\n    sum()\n}\n\ndt |>\n  purrr::map_int(shift) |>\n  sum()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 #          2 FALSE         0 #           0\n 2 #          3 FALSE         0 #           0\n 3 .          3 FALSE         0 O           3\n 4 .          3 FALSE         0 O           4\n 5 O          3 FALSE         1 O           5\n 6 .          3 FALSE         1 O           6\n 7 O          3 FALSE         2 .           0\n 8 .          3 FALSE         2 .           0\n 9 O          3 FALSE         3 .           0\n10 O          3 FALSE         4 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 O          1 FALSE         1 O           1\n 2 .          1 FALSE         1 O           2\n 3 .          1 FALSE         1 O           3\n 4 .          1 FALSE         1 .           0\n 5 .          1 FALSE         1 .           0\n 6 O          1 FALSE         2 .           0\n 7 O          1 FALSE         3 .           0\n 8 .          1 FALSE         3 .           0\n 9 .          1 FALSE         3 .           0\n10 .          1 FALSE         3 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 O          1 FALSE         1 O           1\n 2 .          1 FALSE         1 O           2\n 3 .          1 FALSE         1 .           0\n 4 O          1 FALSE         2 .           0\n 5 #          2 FALSE         0 #           0\n 6 .          2 FALSE         0 O           6\n 7 .          2 FALSE         0 .           0\n 8 .          2 FALSE         0 .           0\n 9 O          2 FALSE         1 .           0\n10 .          2 FALSE         1 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 .          1 FALSE         0 .           0\n 2 .          1 FALSE         0 .           0\n 3 .          1 FALSE         0 .           0\n 4 .          1 FALSE         0 .           0\n 5 .          1 FALSE         0 .           0\n 6 .          1 FALSE         0 .           0\n 7 #          2 FALSE         0 #           0\n 8 .          2 FALSE         0 O           8\n 9 O          2 FALSE         1 .           0\n10 .          2 FALSE         1 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 .          1 FALSE         0 O           1\n 2 .          1 FALSE         0 .           0\n 3 .          1 FALSE         0 .           0\n 4 .          1 FALSE         0 .           0\n 5 .          1 FALSE         0 .           0\n 6 .          1 FALSE         0 .           0\n 7 O          1 FALSE         1 .           0\n 8 .          1 FALSE         1 .           0\n 9 #          2 FALSE         0 #           0\n10 .          2 FALSE         0 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 #          2 FALSE         0 #           0\n 2 #          3 FALSE         0 #           0\n 3 .          3 FALSE         0 .           0\n 4 #          4 FALSE         0 #           0\n 5 O          4 FALSE         1 O           5\n 6 .          4 FALSE         1 .           0\n 7 .          4 FALSE         1 .           0\n 8 #          5 FALSE         0 #           0\n 9 .          5 FALSE         0 .           0\n10 #          6 FALSE         0 #           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 .          1 FALSE         0 .           0\n 2 #          2 FALSE         0 #           0\n 3 .          2 FALSE         0 O           3\n 4 O          2 FALSE         1 .           0\n 5 .          2 FALSE         1 .           0\n 6 .          2 FALSE         1 .           0\n 7 .          2 FALSE         1 .           0\n 8 #          3 FALSE         0 #           0\n 9 .          3 FALSE         0 .           0\n10 .          3 FALSE         0 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 .          1 FALSE         0 .           0\n 2 #          2 FALSE         0 #           0\n 3 O          2 FALSE         1 O           3\n 4 .          2 FALSE         1 .           0\n 5 #          3 FALSE         0 #           0\n 6 O          3 FALSE         1 O           6\n 7 .          3 FALSE         1 .           0\n 8 .          3 FALSE         1 .           0\n 9 .          3 FALSE         1 .           0\n10 .          3 FALSE         1 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 .          1 FALSE         0 .           0\n 2 .          1 FALSE         0 .           0\n 3 .          1 FALSE         0 .           0\n 4 .          1 FALSE         0 .           0\n 5 .          1 FALSE         0 .           0\n 6 #          2 FALSE         0 #           0\n 7 .          2 FALSE         0 .           0\n 8 .          2 FALSE         0 .           0\n 9 .          2 FALSE         0 .           0\n10 .          2 FALSE         0 .           0\n# A tibble: 10 × 6\n   value square row_zero rounds shifted  load\n   <chr>  <int> <lgl>     <int> <chr>   <dbl>\n 1 .          1 FALSE         0 O           1\n 2 .          1 FALSE         0 .           0\n 3 .          1 FALSE         0 .           0\n 4 O          1 FALSE         1 .           0\n 5 #          2 FALSE         0 #           0\n 6 .          2 FALSE         0 O           6\n 7 O          2 FALSE         1 .           0\n 8 .          2 FALSE         1 .           0\n 9 #          3 FALSE         0 #           0\n10 .          3 FALSE         0 .           0\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 66\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}